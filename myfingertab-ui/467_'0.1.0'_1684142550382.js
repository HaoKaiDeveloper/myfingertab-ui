"use strict";(self["webpackChunkmyfingertab"]=self["webpackChunkmyfingertab"]||[]).push([[467],{6467:(e,t,r)=>{r.r(t),r.d(t,{default:()=>S});r(8309);var n=r(3396),u=r(7139),a=r(9242),i=function(e){return(0,n.dD)("data-v-2753710b"),e=e(),(0,n.Cn)(),e},s={id:"loginPage"},l={key:0},o={key:0,for:"name"},c={for:"email"},m={for:"password"},p={key:1,class:"err_msg"},b={key:2,type:"submit",class:"submit_btn"},f=i((function(){return(0,n._)("hr",null,null,-1)})),v={class:"btns"},g=i((function(){return(0,n._)("button",{type:"button"},"Facebook",-1)})),d=i((function(){return(0,n._)("button",{type:"button"},"Google",-1)})),w={key:1},k=["src"],y=i((function(){return(0,n._)("p",{class:"regi_msg"},"註冊成功，請至信箱查看確認信",-1)}));function h(e,t,r,i,h,_){var x=(0,n.up)("router-link");return(0,n.wg)(),(0,n.iD)("section",s,[i.registerStatus?((0,n.wg)(),(0,n.iD)("main",w,[(0,n._)("img",{src:i.logo,alt:"logo"},null,8,k),y])):((0,n.wg)(),(0,n.iD)("main",l,[(0,n._)("h1",null,(0,u.zw)(i.title),1),(0,n._)("form",{onSubmit:t[4]||(t[4]=(0,a.iM)((function(){return i.memberAuth&&i.memberAuth.apply(i,arguments)}),["prevent"]))},[i.isMember?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("label",o,[(0,n.Uk)(" 姓名 : "),(0,n.wy)((0,n._)("input",{type:"text",id:"name","onUpdate:modelValue":t[0]||(t[0]=function(e){return i.name=e})},null,512),[[a.nr,i.name]])])),(0,n._)("label",c,[(0,n.Uk)(" Email : "),(0,n.wy)((0,n._)("input",{type:"email",id:"email","onUpdate:modelValue":t[1]||(t[1]=function(e){return i.email=e})},null,512),[[a.nr,i.email]])]),(0,n._)("label",m,[(0,n.Uk)(" 密碼 : "),(0,n.wy)((0,n._)("input",{type:"password",id:"password","onUpdate:modelValue":t[2]||(t[2]=function(e){return i.password=e})},null,512),[[a.nr,i.password]])]),i.errMsg?((0,n.wg)(),(0,n.iD)("p",p,(0,u.zw)(i.errMsg),1)):((0,n.wg)(),(0,n.iD)("button",b,(0,u.zw)(i.isMember?"登入":"註冊"),1)),(0,n._)("button",{type:"button",onClick:t[3]||(t[3]=function(){return i.toggleIsMember&&i.toggleIsMember.apply(i,arguments)}),class:"toggle_btn"},(0,u.zw)(i.isMember?"會員註冊":"會員登入"),1)],32),f,(0,n._)("div",v,[g,d,i.isMember?((0,n.wg)(),(0,n.j4)(x,{key:0,to:"/setPassword"},{default:(0,n.w5)((function(){return[(0,n.Uk)("忘記密碼")]})),_:1})):(0,n.kq)("",!0)])]))])}var _=r(124),x=r(8534),M=(r(7941),r(2564),r(8862),r(7658),r(4870)),D=r(65),I=r(2483),Z=r(6206);const U={setup:function(){var e=(0,D.oR)(),t=(0,I.yj)(),r=(0,I.tv)(),u=(0,M.iH)(!0),a=(0,M.iH)(""),i=(0,M.iH)(""),s=(0,M.iH)(""),l=(0,M.iH)(!1),o=(0,M.iH)(""),c=(0,n.Fl)((function(){return u.value?"會員登入":"會員註冊"}));function m(){return p.apply(this,arguments)}function p(){return p=(0,x.Z)((0,_.Z)().mark((function t(){var r;return(0,_.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(s.value){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,e.dispatch("member/memberRegister",{name:s.value,email:a.value,password:i.value,userId:s.value});case 5:if(r=t.sent,r){t.next=8;break}return t.abrupt("return",l.value=!1);case 8:l.value=!0,t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](2),l.value=!1,console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[2,11]])}))),p.apply(this,arguments)}function b(){return f.apply(this,arguments)}function f(){return f=(0,x.Z)((0,_.Z)().mark((function t(){var n,u,s;return(0,_.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.dispatch("member/memberLogin",{email:a.value,password:i.value});case 3:if(n=t.sent,u=n.accessToken,s=n.mbrID,u){t.next=7;break}return t.abrupt("return",o.value="登入失敗");case 7:localStorage.setItem("member",JSON.stringify({token:u,mbrID:s})),e.commit("member/setMemberAuthInfo",{token:u,mbrID:s}),r.push("/"),t.next=16;break;case 12:t.prev=12,t.t0=t["catch"](0),o.value="登入失敗",console.log(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,12]])}))),f.apply(this,arguments)}function v(){return g.apply(this,arguments)}function g(){return g=(0,x.Z)((0,_.Z)().mark((function e(){return(0,_.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a.value&&i.value){e.next=2;break}return e.abrupt("return");case 2:if(!u.value){e.next=4;break}return e.abrupt("return",b());case 4:m();case 5:case"end":return e.stop()}}),e)}))),g.apply(this,arguments)}function d(){u.value=!u.value}return Object.keys(t.query).length>0&&e.dispatch("member/memberActivate",t.query.token),(0,n.YP)((function(){return o.value}),(function(){o.value&&setTimeout((function(){o.value=""}),2e3)})),{logo:Z,isMember:u,memberAuth:v,name:s,password:i,email:a,title:c,errMsg:o,toggleIsMember:d,registerStatus:l}}};var H=r(89);const A=(0,H.Z)(U,[["render",h],["__scopeId","data-v-2753710b"]]),S=A}}]);
//# sourceMappingURL=467_'0.1.0'_1684142550382.js.map