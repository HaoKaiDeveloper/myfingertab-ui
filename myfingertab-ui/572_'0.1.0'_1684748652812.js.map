{"version":3,"file":"572_'0.1.0'_1684748652812.js","mappings":"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","sources":["webpack://myfingertab/./src/views/SheetMusic/SheetMusicpage.vue","webpack://myfingertab/./src/views/SheetMusic/SheetMusicpage.vue?6eb7"],"sourcesContent":["<template>\n  <section id=\"sheetMusicPage\">\n    <div class=\"header\">\n      <p class=\"title\">指彈樂譜</p>\n      <div class=\"select\">\n        <select v-model=\"musicKind\">\n          <option value=\"1\">難易度:簡單到難</option>\n          <option value=\"2\">難易度:難到簡單</option>\n          <option value=\"3\">熱門程度</option>\n          <option value=\"4\">最新上架</option>\n        </select>\n      </div>\n      <label for=\"search\"\n        >樂譜搜尋\n        <input\n          type=\"text\"\n          id=\"search\"\n          v-model=\"searchInput\"\n          @keypress.enter=\"searchMusicSheet\"\n        />\n        <v-icon icon=\"mdi-magnify\" class=\"icon\" @click=\"searchMusicSheet\" />\n      </label>\n    </div>\n\n    <div class=\"music_cards\">\n      <MusicCard\n        v-for=\"music in allMusic\"\n        :key=\"music.sheetid\"\n        :music=\"music\"\n        @open-music-detail=\"openMusicDetail\"\n      />\n    </div>\n\n    <MusicDetailPopup\n      :data=\"musicDetail\"\n      @close-music-detail=\"openMusicDetail\"\n    />\n\n    <div class=\"pages_box\">\n      <div class=\"pages\" v-if=\"showPages\">\n        <button\n          type=\"button\"\n          v-if=\"activePage >= 2\"\n          @click=\"changeActivePage(activePage - 1)\"\n        >\n          上一頁\n        </button>\n        <button\n          type=\"button\"\n          v-for=\"page in pagesArr[activePagesArr]\"\n          :key=\"page\"\n          :class=\"{ active: activePage === page }\"\n          @click=\"changeActivePage(page)\"\n        >\n          {{ page }}\n        </button>\n        <button\n          type=\"button\"\n          v-if=\"activePage < totalPages\"\n          @click=\"changeActivePage(activePage + 1)\"\n        >\n          下一頁\n        </button>\n        <button\n          type=\"button\"\n          v-if=\"activePage < totalPages\"\n          @click=\"changeActivePage(totalPages)\"\n        >\n          最後\n        </button>\n      </div>\n      <button\n        type=\"button\"\n        class=\"loadBtn\"\n        v-if=\"activePage < totalPages\"\n        @click=\"changeActivePage(activePage + 1)\"\n      >\n        載入更多\n      </button>\n    </div>\n  </section>\n</template>\n\n<script>\nimport { MusicCard } from \"../../components/UI\";\nimport MusicDetailPopup from \"../MusicDetail.vue\";\nimport { ref, watch } from \"vue\";\nimport { useStore } from \"vuex\";\nexport default {\n  components: {\n    MusicCard,\n    MusicDetailPopup,\n  },\n  setup() {\n    const store = useStore();\n    const allMusic = ref([]);\n    const musicDetail = ref({});\n    const showMusicDetail = ref(false);\n    const musicKind = ref(\"1\");\n    const pageSize = ref(9);\n    const searchInput = ref(\"\");\n\n    const totalPages = ref(0);\n    const active = ref(0);\n    const pagesArr = ref([]);\n    const activePagesArr = ref(0);\n    const activePage = ref(1);\n    const showPages = ref(true);\n\n    getMusic();\n    async function getMusic() {\n      const data = await store.dispatch(\"getAllMusic\", {\n        pageSize: pageSize.value,\n        kind: musicKind.value,\n        page: activePage.value,\n      });\n      allMusic.value = data.SheetInfo;\n      totalPages.value = data.totalpage;\n      showPages.value = true;\n      let arr = [];\n      for (let i = 1; i <= totalPages.value; i++) {\n        arr.push(i);\n      }\n      Array.from({ length: Math.ceil(totalPages.value / 5) }, (_, index) => {\n        const start = index * 5;\n        const end = (index + 1) * 5;\n        pagesArr.value.push(arr.slice(start, end));\n      });\n    }\n\n    async function searchMusicSheet() {\n      if (!searchInput.value.length) {\n        return getMusic();\n      }\n      const data = await store.dispatch(\"searchMusicSheet\", {\n        keyword: searchInput.value,\n      });\n      allMusic.value = data;\n      totalPages.value = 0;\n      showPages.value = false;\n    }\n\n    async function openMusicDetail(id) {\n      if (!id) {\n        showMusicDetail.value = false;\n        musicDetail.value = {};\n        return;\n      }\n      const res = await store.dispatch(\"getSingleMusicSheet\", {\n        sheetid: id,\n        userid: \"userid-1\",\n      });\n      musicDetail.value = res;\n      showMusicDetail.value = true;\n    }\n\n    function changeActivePage(page) {\n      activePage.value = page;\n    }\n\n    watch(\n      () => [activePage.value, musicKind.value],\n      () => {\n        const activePagesArrMax = pagesArr.value[activePagesArr.value][4];\n        const activePagesArrMin = pagesArr.value[activePagesArr.value][0];\n        if (activePage.value > activePagesArrMax) {\n          activePagesArr.value++;\n        }\n        if (activePage.value < activePagesArrMin) {\n          activePagesArr.value--;\n        }\n        if (activePage.value === totalPages.value) {\n          activePagesArr.value = pagesArr.value.length - 1;\n        }\n        getMusic();\n      }\n    );\n\n    return {\n      allMusic,\n      musicKind,\n      searchInput,\n      getMusic,\n      searchMusicSheet,\n      totalPages,\n      active,\n      pagesArr,\n      activePagesArr,\n      activePage,\n      musicDetail,\n      showMusicDetail,\n      openMusicDetail,\n      changeActivePage,\n      showPages,\n    };\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n#sheetMusicPage {\n  padding: 0 5em;\n  min-height: 95vh;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 2em;\n  margin: 0 auto;\n  color: var(--grey-4);\n  position: relative;\n\n  @media screen and (max-width: 1000px) {\n    padding: 0 1em;\n  }\n}\n.header {\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 2em;\n\n  .title {\n    font-size: var(--f-l);\n    margin-left: 1.5rem;\n  }\n\n  .select {\n    flex: 1;\n    select {\n      padding: 0.3em 0.7em;\n      font-size: var(--f-s);\n      letter-spacing: 1.5px;\n      outline: none;\n      text-align: start;\n      border-radius: 7px;\n      border: 1px solid var(--grey-3);\n      cursor: pointer;\n    }\n  }\n\n  label {\n    font-size: var(--f-s);\n    letter-spacing: 1.5px;\n    margin-right: 1.5rem;\n    input {\n      padding: 0.2em 0.7em;\n      outline: none;\n      border-radius: 7px;\n      border: 1px solid var(--grey-3);\n      font-size: 0.8rem;\n    }\n    .icon {\n      font-size: 1.5rem;\n      margin-left: 0.2em;\n    }\n  }\n  @media screen and (max-width: 600px) {\n    flex-direction: column;\n    gap: 1em;\n    align-items: flex-start;\n    .title {\n      margin-left: 0;\n    }\n    label {\n      margin-right: 0;\n      input {\n        width: 10em;\n      }\n    }\n  }\n}\n.music_cards {\n  width: 100%;\n  min-height: 95vh;\n  display: grid;\n  grid-template-columns: repeat(3, minmax(20em, 30em));\n  justify-content: center;\n  gap: 2em;\n\n  @media screen and (max-width: 820px) {\n    grid-template-columns: repeat(2, minmax(20em, 30em));\n    gap: 1em;\n  }\n\n  @media screen and (max-width: 650px) {\n    grid-template-columns: 1fr;\n  }\n}\n\n.pages_box {\n  width: 100%;\n  display: flex;\n  justify-content: flex-end;\n  .pages {\n    display: flex;\n    align-items: center;\n    gap: 1em;\n    margin-top: 2em;\n  }\n  button {\n    font-size: var(--f-mi);\n    padding: 0.2em 0.7em;\n    border-radius: 7px;\n    background-color: var(--grey-2);\n    &.active,\n    &:hover {\n      background-color: var(--l-orange-1);\n      color: var(--grey-4);\n    }\n  }\n  .loadBtn {\n    display: none;\n    font-size: var(--f-mi);\n  }\n  @media screen and (max-width: 550px) {\n    justify-content: center;\n\n    .pages {\n      display: none;\n    }\n    .loadBtn {\n      display: block;\n    }\n  }\n}\n</style>\n","import { render } from \"./SheetMusicpage.vue?vue&type=template&id=78090842&scoped=true\"\nimport script from \"./SheetMusicpage.vue?vue&type=script&lang=js\"\nexport * from \"./SheetMusicpage.vue?vue&type=script&lang=js\"\n\nimport \"./SheetMusicpage.vue?vue&type=style&index=0&id=78090842&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\USER\\\\Desktop\\\\myfingertab-master\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-78090842\"]])\n\nexport default __exports__"],"names":["id","class","_createElementVNode","value","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","for","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","$setup","musicKind","$event","_hoisted_10","type","searchInput","onKeypress","_cache","_withKeys","searchMusicSheet","apply","arguments","_createVNode","_component_v_icon","icon","onClick","_hoisted_11","_Fragment","_renderList","allMusic","music","_createBlock","_component_MusicCard","key","sheetid","onOpenMusicDetail","openMusicDetail","_component_MusicDetailPopup","data","musicDetail","onCloseMusicDetail","_hoisted_12","showPages","_hoisted_13","activePage","changeActivePage","pagesArr","activePagesArr","page","_normalizeClass","active","_hoisted_14","totalPages","components","MusicCard","MusicDetailPopup","setup","store","useStore","ref","showMusicDetail","pageSize","getMusic","_getMusic","_asyncToGenerator","_regeneratorRuntime","mark","_callee","arr","i","wrap","_context","prev","next","dispatch","kind","sent","SheetInfo","totalpage","push","Array","from","length","Math","ceil","_","index","start","end","slice","stop","_searchMusicSheet","_callee2","_context2","abrupt","keyword","_x","_openMusicDetail","_callee3","res","_context3","userid","watch","activePagesArrMax","activePagesArrMin","__exports__","render"],"sourceRoot":""}