"use strict";(self["webpackChunkmyfingertab"]=self["webpackChunkmyfingertab"]||[]).push([[16],{4016:(e,t,r)=>{r.r(t),r.d(t,{default:()=>U});r(8309);var n=r(3396),a=r(7139),u=r(9242),i=function(e){return(0,n.dD)("data-v-1c45a22c"),e=e(),(0,n.Cn)(),e},s={id:"loginPage"},l={key:0,for:"name"},o={for:"email"},c={for:"password"},p={key:1,class:"err_msg"},m={key:2,type:"submit",class:"submit_btn"},b=i((function(){return(0,n._)("hr",null,null,-1)})),g={class:"btns"},f={key:0,class:"registerPop"},v={class:"text"},d=["src"],k=i((function(){return(0,n._)("p",{class:"regi_msg"},"註冊成功，請至信箱查看確認信",-1)}));function w(e,t,r,i,w,h){var y=(0,n.up)("router-link");return(0,n.wg)(),(0,n.iD)("section",s,[(0,n._)("main",null,[(0,n._)("h1",null,(0,a.zw)(i.title),1),(0,n._)("form",{onSubmit:t[4]||(t[4]=(0,u.iM)((function(){return i.memberAuth&&i.memberAuth.apply(i,arguments)}),["prevent"]))},[i.isMember?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("label",l,[(0,n.Uk)(" 姓名 : "),(0,n.wy)((0,n._)("input",{type:"text",id:"name","onUpdate:modelValue":t[0]||(t[0]=function(e){return i.name=e})},null,512),[[u.nr,i.name]])])),(0,n._)("label",o,[(0,n.Uk)(" Email : "),(0,n.wy)((0,n._)("input",{type:"email",id:"email","onUpdate:modelValue":t[1]||(t[1]=function(e){return i.email=e})},null,512),[[u.nr,i.email]])]),(0,n._)("label",c,[(0,n.Uk)(" 密碼 : "),(0,n.wy)((0,n._)("input",{type:"password",id:"password","onUpdate:modelValue":t[2]||(t[2]=function(e){return i.password=e})},null,512),[[u.nr,i.password]])]),i.errMsg?((0,n.wg)(),(0,n.iD)("p",p,(0,a.zw)(i.errMsg),1)):((0,n.wg)(),(0,n.iD)("button",m,(0,a.zw)(i.isMember?"登入":"註冊"),1)),(0,n._)("button",{type:"button",onClick:t[3]||(t[3]=function(){return i.toggleIsMember&&i.toggleIsMember.apply(i,arguments)}),class:"toggle_btn"},(0,a.zw)(i.isMember?"會員註冊":"會員登入"),1)],32),b,(0,n._)("div",g,[(0,n._)("button",{type:"button",onClick:t[5]||(t[5]=function(){return i.googleLogin&&i.googleLogin.apply(i,arguments)})},"Google"),i.isMember?((0,n.wg)(),(0,n.j4)(y,{key:0,to:"/setPassword"},{default:(0,n.w5)((function(){return[(0,n.Uk)("忘記密碼")]})),_:1})):(0,n.kq)("",!0)])]),i.registerStatus?((0,n.wg)(),(0,n.iD)("div",f,[(0,n._)("div",{class:"backdrop",onClick:t[6]||(t[6]=function(e){return i.registerStatus=!i.registerStatus})}),(0,n._)("div",v,[(0,n._)("img",{src:i.logo,alt:"logo"},null,8,d),k])])):(0,n.kq)("",!0)])}var h=r(124),y=r(8534),_=(r(7941),r(2564),r(8862),r(7658),r(4870)),x=r(65),M=r(2483),I=r(6206);const Z={setup:function(){var e=(0,x.oR)(),t=(0,M.yj)(),r=(0,M.tv)(),a=(0,_.iH)(!0),u=(0,_.iH)(""),i=(0,_.iH)(""),s=(0,_.iH)(""),l=(0,_.iH)(!1),o=(0,_.iH)(""),c=(0,n.Fl)((function(){return a.value?"會員登入":"會員註冊"}));function p(){return m.apply(this,arguments)}function m(){return m=(0,y.Z)((0,h.Z)().mark((function t(){var r;return(0,h.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(s.value){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,e.dispatch("member/memberRegister",{name:s.value,email:u.value,password:i.value,userId:s.value});case 5:if(r=t.sent,r&&"該信箱已經註冊過，請更換信箱"!==r.data){t.next=9;break}return o.value="該信箱已經註冊過",t.abrupt("return",l.value=!1);case 9:l.value=!0,t.next=16;break;case 12:t.prev=12,t.t0=t["catch"](2),l.value=!1,console.log(t.t0);case 16:case"end":return t.stop()}}),t,null,[[2,12]])}))),m.apply(this,arguments)}function b(){return g.apply(this,arguments)}function g(){return g=(0,y.Z)((0,h.Z)().mark((function t(){var n,a,s;return(0,h.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.dispatch("member/memberLogin",{email:u.value,password:i.value});case 3:if(n=t.sent,a=n.accessToken,s=n.mbrID,a){t.next=7;break}return t.abrupt("return",o.value="登入失敗");case 7:localStorage.setItem("member",JSON.stringify({token:a,mbrID:s})),e.commit("member/setMemberAuthInfo",{token:a,mbrID:s}),r.push("/"),t.next=16;break;case 12:t.prev=12,t.t0=t["catch"](0),o.value="登入失敗",console.log(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,12]])}))),g.apply(this,arguments)}function f(){return v.apply(this,arguments)}function v(){return v=(0,y.Z)((0,h.Z)().mark((function e(){return(0,h.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(u.value&&i.value){e.next=2;break}return e.abrupt("return");case 2:if(!a.value){e.next=4;break}return e.abrupt("return",b());case 4:p();case 5:case"end":return e.stop()}}),e)}))),v.apply(this,arguments)}function d(){window.location.href="https://s.intella.co/myfingertab/oauth2/authorization/google"}function k(){a.value=!a.value}return Object.keys(t.query).length>0&&e.dispatch("member/memberActivate",t.query.token),(0,n.YP)((function(){return o.value}),(function(){o.value&&setTimeout((function(){o.value=""}),2e3)})),{logo:I,isMember:a,memberAuth:f,name:s,password:i,email:u,title:c,errMsg:o,toggleIsMember:k,registerStatus:l,googleLogin:d}}};var D=r(89);const S=(0,D.Z)(Z,[["render",w],["__scopeId","data-v-1c45a22c"]]),U=S}}]);
//# sourceMappingURL=16_'0.1.0'_1685003688405.js.map