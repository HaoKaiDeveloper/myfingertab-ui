"use strict";(self["webpackChunkmyfingertab"]=self["webpackChunkmyfingertab"]||[]).push([[28],{9028:(e,n,t)=>{t.r(n),t.d(n,{default:()=>be});var r=t(3396),o=t(7139),a={id:"memberInfo"},u={class:"tab"},l={class:"tab_btns"};function i(e,n,t,i,c,s){return(0,r.wg)(),(0,r.iD)("section",a,[(0,r._)("div",u,[(0,r._)("div",l,[(0,r._)("button",{type:"button",onClick:n[0]||(n[0]=function(e){return i.changeTabValue("Tab_InfoForm")}),class:(0,o.C_)({active:"Tab_InfoForm"===i.activeTab})}," 基本資料 ",2),(0,r._)("button",{type:"button",onClick:n[1]||(n[1]=function(e){return i.changeTabValue("Tab_MySheetMusic")}),class:(0,o.C_)({active:"Tab_MySheetMusic"===i.activeTab})}," 我的樂譜 ",2),(0,r._)("button",{type:"button",onClick:n[2]||(n[2]=function(e){return i.changeTabValue("Tab_ShoppingSheet")}),class:(0,o.C_)({active:"Tab_ShoppingSheet"===i.activeTab})}," 購買紀錄 ",2)]),((0,r.wg)(),(0,r.j4)((0,r.LL)(i.activeTab),{authInfo:i.menubarAuthInfo,basicInfo:i.basicInfo},null,8,["authInfo","basicInfo"]))])])}var c=t(124),s=t(8534),p=t(4870),d=(t(8309),t(9242)),f=t(7783),h=function(e){return(0,r.dD)("data-v-45bcb27e"),e=e(),(0,r.Cn)(),e},b=h((function(){return(0,r._)("label",null,"Email",-1)})),_=h((function(){return(0,r._)("label",{for:"name"},"姓名",-1)})),m=["placeholder"],v=h((function(){return(0,r._)("label",{for:"tel"},"聯絡電話",-1)})),w=["placeholder"],g={class:"gender"},y=h((function(){return(0,r._)("label",{for:"gender"},"性別",-1)})),k={for:"man"},I=["checked"],Z={for:"woman"},D=["checked"],T=h((function(){return(0,r._)("label",{for:"address"},"聯絡地址",-1)})),C=["placeholder"],x=h((function(){return(0,r._)("label",{for:"birthday"},"生日 ",-1)})),U=["placeholder"],M={class:"msg"},N={type:"submit"};function S(e,n,t,a,u,l){return(0,r.wg)(),(0,r.iD)("form",{class:"basic_info",onSubmit:n[7]||(n[7]=(0,d.iM)((function(){return a.setMemberInfo&&a.setMemberInfo.apply(a,arguments)}),["prevent"]))},[(0,r._)("div",null,[b,(0,r._)("p",null,(0,o.zw)(t.basicInfo.email),1)]),(0,r._)("div",null,[_,(0,r.wy)((0,r._)("input",{type:"text",id:"name",placeholder:a.info.name,"onUpdate:modelValue":n[0]||(n[0]=function(e){return a.info.name=e})},null,8,m),[[d.nr,a.info.name]])]),(0,r._)("div",null,[v,(0,r.wy)((0,r._)("input",{type:"tel",id:"tel",placeholder:a.info.tel,"onUpdate:modelValue":n[1]||(n[1]=function(e){return a.info.tel=e})},null,8,w),[[d.nr,a.info.tel]])]),(0,r._)("div",g,[y,(0,r._)("label",k,[(0,r.wy)((0,r._)("input",{type:"radio",name:"gender",id:"man",value:"M","onUpdate:modelValue":n[2]||(n[2]=function(e){return a.info.gender=e}),checked:"M"===a.info.gender},null,8,I),[[d.G2,a.info.gender]]),(0,r.Uk)(" 男 ")]),(0,r._)("label",Z,[(0,r.wy)((0,r._)("input",{type:"radio",name:"gender",id:"woman",value:"F","onUpdate:modelValue":n[3]||(n[3]=function(e){return a.info.gender=e}),checked:"F"===a.info.gender},null,8,D),[[d.G2,a.info.gender]]),(0,r.Uk)(" 女 ")])]),(0,r._)("div",null,[T,(0,r.wy)((0,r._)("input",{type:"text",id:"address",placeholder:a.info.addr,"onUpdate:modelValue":n[4]||(n[4]=function(e){return a.info.addr=e})},null,8,C),[[d.nr,a.info.addr]])]),(0,r._)("div",null,[x,(0,r.wy)((0,r._)("input",{type:"date",id:"birthday",placeholder:a.info.birth,"onUpdate:modelValue":n[5]||(n[5]=function(e){return a.info.birth=e})},null,8,U),[[d.nr,a.info.birth]])]),(0,r._)("p",M,(0,o.zw)(a.msg),1),(0,r._)("button",N,[(0,r.Uk)(" 儲存會員資料 "),(0,r.Wm)(f.t,{icon:"mdi-arrow-right",class:"i"})]),(0,r._)("button",{type:"button",onClick:n[6]||(n[6]=function(){return a.logout&&a.logout.apply(a,arguments)})},"登出")],32)}var P=t(5082),H=(t(7658),t(2564),t(65)),z=t(2483);const V={props:["authInfo","basicInfo"],setup:function(e){var n=(0,H.oR)(),t=(0,p.iH)(""),o=(0,z.tv)(),a=(0,p.iH)({name:"",tel:"",gender:"",addr:"",birth:""});function u(){return l.apply(this,arguments)}function l(){return l=(0,s.Z)((0,c.Z)().mark((function r(){return(0,c.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,n.dispatch("member/setMemberInfo",(0,P.Z)({info:(0,P.Z)({},a.value)},e.authInfo));case 3:n.commit("member/setMemberName",a.value.name),t.value="資料更新完成",r.next=10;break;case 7:r.prev=7,r.t0=r["catch"](0),console.log(r.t0);case 10:case"end":return r.stop()}}),r,null,[[0,7]])}))),l.apply(this,arguments)}function i(){n.commit("member/logout"),o.push("/")}return(0,r.YP)((function(){return t.value}),(function(){t.value&&setTimeout((function(){t.value=""}),2e3)})),(0,r.YP)((function(){return e.basicInfo}),(function(){a.value=(0,P.Z)((0,P.Z)({},a.value),e.basicInfo)})),{info:a,setMemberInfo:u,msg:t,logout:i}}};var F=t(89);const A=(0,F.Z)(V,[["render",S],["__scopeId","data-v-45bcb27e"]]),O=A;var R=function(e){return(0,r.dD)("data-v-be82468e"),e=e(),(0,r.Cn)(),e},Y={class:"mySheetMusic"},L=R((function(){return(0,r._)("p",{class:"title"},"我的樂譜",-1)})),j=R((function(){return(0,r._)("tr",null,[(0,r._)("th",null,"曲名"),(0,r._)("th",null,"創作者"),(0,r._)("th",null,"下載連結")],-1)})),q=["onClick"];function K(e,n,t,a,u,l){return(0,r.wg)(),(0,r.iD)("article",Y,[L,(0,r._)("table",null,[j,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.sheets,(function(e){return(0,r.wg)(),(0,r.iD)("tr",{key:e.sheetId},[(0,r._)("td",null,[(0,r._)("span",null,(0,o.zw)(e.sheetName),1)]),(0,r._)("td",null,(0,o.zw)(e.creatornm),1),(0,r._)("td",null,[(0,r._)("button",{type:"button",onClick:function(n){return a.downloadSheet(e)}},[(0,r.Wm)(f.t,{icon:"mdi-download"})],8,q)])])})),128))])])}t(6647),t(5505),t(7714),t(2801),t(1174),t(7042),t(9575),t(1539),t(2472),t(8675),t(2990),t(8927),t(3105),t(5035),t(4345),t(7174),t(3408),t(2958),t(2846),t(4731),t(7209),t(6319),t(8867),t(7789),t(3739),t(9368),t(4483),t(2056),t(3462),t(678),t(7462),t(3824),t(5021),t(2974),t(5016),t(3767),t(8585),t(8696),t(8783),t(3948),t(285),t(1637);const W={props:["authInfo"],setup:function(e){var n=(0,H.oR)(),t=(0,p.iH)([]);function r(){return o.apply(this,arguments)}function o(){return o=(0,s.Z)((0,c.Z)().mark((function r(){var o;return(0,c.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,n.dispatch("order/getPurchasedSheets",e.authInfo);case 2:o=r.sent,o&&(t.value=o);case 4:case"end":return r.stop()}}),r)}))),o.apply(this,arguments)}function a(e){return u.apply(this,arguments)}function u(){return u=(0,s.Z)((0,c.Z)().mark((function t(r){var o,a,u,l,i,s,p,d,f,h,b,_;return(0,c.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n.dispatch("downloadSheet",(0,P.Z)((0,P.Z)({},e.authInfo),{},{sheetId:r.sheetId}));case 3:for(o=t.sent,a=o,u=atob(a),l=[],i=0;i<u.length;i+=1024){for(s=u.slice(i,i+1024),p=new Array(s.length),d=0;d<s.length;d++)p[d]=s.charCodeAt(d);f=new Uint8Array(p),l.push(f)}h=new Blob(l,{type:"application/pdf"}),b=URL.createObjectURL(h),_=document.createElement("a"),_.href=b,_.download="".concat(r.sheetName,".pdf"),_.textContent="Download PDF",_.click(),t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](0),console.log(t.t0);case 20:case"end":return t.stop()}}),t,null,[[0,17]])}))),u.apply(this,arguments)}return r(),{sheets:t,downloadSheet:a}}},E=(0,F.Z)(W,[["render",K],["__scopeId","data-v-be82468e"]]),G=E;var B=function(e){return(0,r.dD)("data-v-0397995e"),e=e(),(0,r.Cn)(),e},$={class:"shoppingSheet"},J=B((function(){return(0,r._)("p",{class:"title"},"購買紀錄",-1)})),Q=B((function(){return(0,r._)("tr",null,[(0,r._)("th",null,"訂購日期"),(0,r._)("th",null,"訂單編號"),(0,r._)("th",null,"訂單金額"),(0,r._)("th",null,"訂單狀態"),(0,r._)("th",null,"購買詳情")],-1)})),X={key:0},ee={key:1},ne=["onClick"];function te(e,n,t,a,u,l){var i=(0,r.up)("OrderDetailPop");return(0,r.wg)(),(0,r.iD)("article",$,[J,(0,r._)("table",null,[Q,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.ordersHistory,(function(e){return(0,r.wg)(),(0,r.iD)("tr",{key:e.transNo},[(0,r._)("td",null,(0,o.zw)(e.orderDate.split(".")[0]),1),(0,r._)("td",null,(0,o.zw)(e.transNo),1),(0,r._)("td",null,[(0,r.Uk)(" $"),(0,r._)("span",null,(0,o.zw)(e.amount),1)]),"1"===e.status?((0,r.wg)(),(0,r.iD)("td",X,"付款成功")):"2"===e.status?((0,r.wg)(),(0,r.iD)("td",ee,"作廢")):(0,r.kq)("",!0),(0,r._)("td",null,[(0,r._)("button",{type:"button",onClick:function(n){return a.getOrderDetail(e.transNo)}}," 查看 ",8,ne)])])})),128))]),a.orderDetail.transNo?((0,r.wg)(),(0,r.j4)(i,{key:0,order:a.orderDetail,transNo:a.orderDetail.transNo,onClosePopup:a.closePopup},null,8,["order","transNo","onClosePopup"])):(0,r.kq)("",!0)])}t(7327),t(9826);var re=function(e){return(0,r.dD)("data-v-6fd40afa"),e=e(),(0,r.Cn)(),e},oe={key:0,class:"order_detail"},ae=re((function(){return(0,r._)("p",null,"購買明細:",-1)}));function ue(e,n,t,a,u,l){return(0,r.wg)(),(0,r.iD)("section",null,[(0,r.Wm)(d.uT,null,{default:(0,r.w5)((function(){return[a.show?((0,r.wg)(),(0,r.iD)("div",oe,[(0,r._)("p",null,[(0,r.Uk)(" 訂購日期: "),(0,r._)("span",null,(0,o.zw)(t.order.orderDate),1)]),(0,r._)("p",null,[(0,r.Uk)(" 訂購編號: "),(0,r._)("span",null,(0,o.zw)(t.order.transNo),1)]),ae,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t.order.sheets,(function(e){return(0,r.wg)(),(0,r.iD)("div",{key:e.sheetId,class:"order_sheet"},[(0,r._)("p",null,[(0,r.Uk)(" 名稱: "),(0,r._)("span",null,(0,o.zw)(e.sheetName),1)]),(0,r._)("p",null,[(0,r.Uk)(" 售價: "),(0,r._)("span",null,(0,o.zw)(e.salePrice),1)])])})),128)),(0,r._)("p",null,[(0,r.Uk)(" 訂單金額: "),(0,r._)("span",null,(0,o.zw)(t.order.amount),1)]),(0,r._)("p",null,[(0,r.Uk)(" 訂單狀態: "),(0,r._)("span",null,(0,o.zw)(t.order.status),1)]),(0,r._)("button",{type:"button",onClick:n[0]||(n[0]=function(){return a.closePopup&&a.closePopup.apply(a,arguments)})},"關閉")])):(0,r.kq)("",!0)]})),_:1})])}const le={props:["order","transNo"],setup:function(e,n){var t=(0,p.iH)(!1);function r(){t.value=!1,setTimeout((function(){n.emit("close-popup")}),250)}return setTimeout((function(){t.value=!0}),0),{closePopup:r,show:t}}},ie=(0,F.Z)(le,[["render",ue],["__scopeId","data-v-6fd40afa"]]),ce=ie,se={props:["authInfo"],components:{OrderDetailPop:ce},setup:function(e){var n=(0,H.oR)(),t=(0,p.iH)([]),r=(0,p.iH)({transNo:""});function o(){return a.apply(this,arguments)}function a(){return a=(0,s.Z)((0,c.Z)().mark((function r(){var o;return(0,c.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,n.dispatch("order/getPurchaseHistory",e.authInfo);case 3:o=r.sent,t.value=o.filter((function(e,n){return"0"!==e.status})),r.next=10;break;case 7:r.prev=7,r.t0=r["catch"](0),console.log(r.t0);case 10:case"end":return r.stop()}}),r,null,[[0,7]])}))),a.apply(this,arguments)}function u(e){return l.apply(this,arguments)}function l(){return l=(0,s.Z)((0,c.Z)().mark((function o(a){var u,l;return(0,c.Z)().wrap((function(o){while(1)switch(o.prev=o.next){case 0:return u=t.value.find((function(e){return e.transNo===a})),o.prev=1,o.next=4,n.dispatch("order/getOrderDetail",(0,P.Z)((0,P.Z)({},e.authInfo),{},{transNo:a}));case 4:l=o.sent,r.value=(0,P.Z)((0,P.Z)({},u),{},{sheets:l}),o.next=11;break;case 8:o.prev=8,o.t0=o["catch"](1),console.log(o.t0);case 11:case"end":return o.stop()}}),o,null,[[1,8]])}))),l.apply(this,arguments)}function i(){r.value={}}return o(),{ordersHistory:t,getOrderDetail:u,orderDetail:r,closePopup:i}}},pe=(0,F.Z)(se,[["render",te],["__scopeId","data-v-0397995e"]]),de=pe,fe={components:{Tab_InfoForm:O,Tab_MySheetMusic:G,Tab_ShoppingSheet:de},setup:function(){var e=(0,H.oR)(),n=(0,p.iH)("Tab_InfoForm"),t=(0,r.Fl)((function(){return e.getters["member/menubarAuthInfo"]})),o=(0,p.iH)({});function a(e){n.value=e,"Tab_InfoForm"===e&&u()}function u(){return l.apply(this,arguments)}function l(){return l=(0,s.Z)((0,c.Z)().mark((function n(){var r;return(0,c.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.dispatch("member/getMemberInfo",t.value);case 3:r=n.sent,o.value=r,n.next=10;break;case 7:n.prev=7,n.t0=n["catch"](0),console.log(n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])}))),l.apply(this,arguments)}return u(),{menubarAuthInfo:t,basicInfo:o,activeTab:n,changeTabValue:a}}},he=(0,F.Z)(fe,[["render",i],["__scopeId","data-v-270b0671"]]),be=he}}]);
//# sourceMappingURL=28_'0.1.0'_1688025223944.js.map