"use strict";(self["webpackChunkmyfingertab"]=self["webpackChunkmyfingertab"]||[]).push([[244],{4244:(t,n,e)=>{e.r(n),e.d(n,{default:()=>H});var r=e(3396),u=e(7139),l=function(t){return(0,r.dD)("data-v-03e22564"),t=t(),(0,r.Cn)(),t},o={class:"shoppingSheet"},a=l((function(){return(0,r._)("p",{class:"title"},"購買紀錄",-1)})),s=l((function(){return(0,r._)("tr",null,[(0,r._)("th",null,"訂購日期"),(0,r._)("th",null,"訂單編號"),(0,r._)("th",null,"訂單金額"),(0,r._)("th",null,"訂單狀態"),(0,r._)("th",null,"購買詳情")],-1)})),i={key:0},c={key:1},p=["onClick"];function d(t,n,e,l,d,f){var _=(0,r.up)("OrderDetailPop");return(0,r.wg)(),(0,r.iD)("article",o,[a,(0,r._)("table",null,[s,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.ordersHistory,(function(t){return(0,r.wg)(),(0,r.iD)("tr",{key:t.transNo},[(0,r._)("td",null,(0,u.zw)(t.orderDate.split(".")[0]),1),(0,r._)("td",null,(0,u.zw)(t.transNo),1),(0,r._)("td",null,[(0,r.Uk)(" $"),(0,r._)("span",null,(0,u.zw)(t.amount),1)]),"1"===t.status?((0,r.wg)(),(0,r.iD)("td",i,"付款成功")):"2"===t.status?((0,r.wg)(),(0,r.iD)("td",c,"作廢")):(0,r.kq)("",!0),(0,r._)("td",null,[(0,r._)("button",{type:"button",onClick:function(n){return l.getOrderDetail(t.transNo)}}," 查看 ",8,p)])])})),128))]),l.orderDetail.transNo?((0,r.wg)(),(0,r.j4)(_,{key:0,order:l.orderDetail,transNo:l.orderDetail.transNo,onClosePopup:l.closePopup},null,8,["order","transNo","onClosePopup"])):(0,r.kq)("",!0)])}var f=e(5082),_=e(124),h=e(8534),w=(e(7327),e(1539),e(9826),e(4870)),v=e(65),k=e(9242),D=function(t){return(0,r.dD)("data-v-16aa6872"),t=t(),(0,r.Cn)(),t},g={key:0,class:"order_detail"},y=D((function(){return(0,r._)("p",null,"購買明細:",-1)}));function m(t,n,e,l,o,a){return(0,r.wg)(),(0,r.iD)("section",null,[(0,r.Wm)(k.uT,null,{default:(0,r.w5)((function(){return[l.show?((0,r.wg)(),(0,r.iD)("div",g,[(0,r._)("p",null,[(0,r.Uk)(" 訂購日期: "),(0,r._)("span",null,(0,u.zw)(e.order.orderDate),1)]),(0,r._)("p",null,[(0,r.Uk)(" 訂購編號: "),(0,r._)("span",null,(0,u.zw)(e.order.transNo),1)]),y,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.order.sheets,(function(t){return(0,r.wg)(),(0,r.iD)("div",{key:t.sheetId,class:"order_sheet"},[(0,r._)("p",null,[(0,r.Uk)(" 名稱: "),(0,r._)("span",null,(0,u.zw)(t.sheetName),1)]),(0,r._)("p",null,[(0,r.Uk)(" 售價: "),(0,r._)("span",null,(0,u.zw)(t.salePrice),1)])])})),128)),(0,r._)("p",null,[(0,r.Uk)(" 訂單金額: "),(0,r._)("span",null,(0,u.zw)(e.order.amount),1)]),(0,r._)("p",null,[(0,r.Uk)(" 訂單狀態: "),(0,r._)("span",null,(0,u.zw)(e.order.status),1)]),(0,r._)("button",{type:"button",onClick:n[0]||(n[0]=function(){return l.closePopup&&l.closePopup.apply(l,arguments)})},"關閉")])):(0,r.kq)("",!0)]})),_:1})])}e(2564);const b={props:["order","transNo"],setup:function(t,n){var e=(0,w.iH)(!1);function r(){e.value=!1,setTimeout((function(){n.emit("close-popup")}),250)}return setTimeout((function(){e.value=!0}),0),{closePopup:r,show:e}}};var N=e(89);const Z=(0,N.Z)(b,[["render",m],["__scopeId","data-v-16aa6872"]]),P=Z,z={components:{OrderDetailPop:P},setup:function(t){var n=(0,v.oR)(),e=(0,w.iH)([]),u=(0,w.iH)({transNo:""}),l=(0,r.Fl)((function(){return n.getters["member/menubarAuthInfo"]}));function o(){return a.apply(this,arguments)}function a(){return a=(0,h.Z)((0,_.Z)().mark((function t(){var r;return(0,_.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n.dispatch("order/getPurchaseHistory",l.value);case 3:r=t.sent,e.value=r.filter((function(t,n){return"0"!==t.status})),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))),a.apply(this,arguments)}function s(t){return i.apply(this,arguments)}function i(){return i=(0,h.Z)((0,_.Z)().mark((function t(r){var o,a;return(0,_.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o=e.value.find((function(t){return t.transNo===r})),t.prev=1,t.next=4,n.dispatch("order/getOrderDetail",(0,f.Z)((0,f.Z)({},l.value),{},{transNo:r}));case 4:a=t.sent,u.value=(0,f.Z)((0,f.Z)({},o),{},{sheets:a}),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])}))),i.apply(this,arguments)}function c(){u.value={}}return o(),{ordersHistory:e,getOrderDetail:s,orderDetail:u,closePopup:c}}},C=(0,N.Z)(z,[["render",d],["__scopeId","data-v-03e22564"]]),H=C}}]);
//# sourceMappingURL=244_'0.1.0'_1689240258835.js.map